import streamlit as st
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ CSV
recipes_df = pd.read_csv('recipes.csv')

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
st.title("–ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ üç≥")

# –ü–æ–∏—Å–∫ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É
st.header("üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É")
ingredient = st.text_input("–í–≤–µ–¥–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞:")

if ingredient:
    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É
    filtered_recipes = recipes_df[recipes_df['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].str.contains(ingredient, case=False, na=False)]
    if not filtered_recipes.empty:
        st.subheader("üçΩÔ∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã:")
        for _, row in filtered_recipes.iterrows():
            st.markdown(f"## {row['–ù–∞–∑–≤–∞–Ω–∏–µ']}")
            # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞–∂–¥—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –≥—Ä—É–ø–ø—ã
            ingredients = ""
            for ing, qty, group in zip(
                row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].split(';'),
                row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ'].split(';'),
                row['–ì—Ä—É–ø–ø–∞'].split(';')
            ):
                ingredients += f"- {ing.strip()} ‚Äî {qty.strip()} ({group.strip()})\n"
            st.markdown(f"**–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:**\n{ingredients}")
            st.write(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{row['–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è']}")
    else:
        st.write("üòî –†–µ—Ü–µ–ø—Ç—ã —Å —ç—Ç–∏–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
st.header("üìã –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã")
for _, row in recipes_df.iterrows():
    st.markdown(f"### {row['–ù–∞–∑–≤–∞–Ω–∏–µ']}")
    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞–∂–¥—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –≥—Ä—É–ø–ø—ã
    ingredients = ""
    for ing, qty, group in zip(
        row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].split(';'),
        row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ'].split(';'),
        row['–ì—Ä—É–ø–ø–∞'].split(';')
    ):
        ingredients += f"- {ing.strip()} ‚Äî {qty.strip()} ({group.strip()})\n"
    st.markdown(f"**–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:**\n{ingredients}")
    st.write(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{row['–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è']}")
