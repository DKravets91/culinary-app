import streamlit as st
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ recipes.csv
recipes_df = pd.read_csv('recipes.csv')

# –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤
recipes_df.columns = recipes_df.columns.str.strip()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤
st.write("–ù–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ —Ñ–∞–π–ª–µ:", list(recipes_df.columns))

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
st.title("–ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ üç≥")

# –ü–æ–∏—Å–∫ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É
st.header("üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É")
ingredient = st.text_input("–í–≤–µ–¥–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞:")

if ingredient:
    filtered_recipes = recipes_df[recipes_df['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç'].str.contains(ingredient, case=False, na=False)]
    if not filtered_recipes.empty:
        st.subheader("üçΩÔ∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã:")
        for _, row in filtered_recipes.iterrows():
            st.markdown(f"## {row['–†–µ—Ü–µ–ø—Ç']}")  # –ó–∞–º–µ–Ω–∏–ª–∏ '–ù–∞–∑–≤–∞–Ω–∏–µ' –Ω–∞ '–†–µ—Ü–µ–ø—Ç'
            st.markdown(f"- {row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç']} ‚Äî {row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ']} ({row['–ö–∞—Ç–µ–≥–æ—Ä–∏—è']})")
            st.write(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{row['–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è']}")
    else:
        st.write("üòî –†–µ—Ü–µ–ø—Ç—ã —Å —ç—Ç–∏–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
st.header("üìã –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã")

# –í—ã–≤–æ–¥ –≤—Å–µ—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç–æ–≤
if "–†–µ—Ü–µ–ø—Ç" in recipes_df.columns:
    grouped = recipes_df.groupby("–†–µ—Ü–µ–ø—Ç")  # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ '–†–µ—Ü–µ–ø—Ç'
    for recipe_name, group in grouped:
        st.markdown(f"### {recipe_name}")
        st.markdown("**–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:**")
        for _, row in group.iterrows():
            st.markdown(f"- {row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç']} ‚Äî {row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ']} ({row['–ö–∞—Ç–µ–≥–æ—Ä–∏—è']})")
        instruction = group["–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"].iloc[0]
        st.markdown(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{instruction}")
else:
    st.write("‚ùå –°—Ç–æ–ª–±–µ—Ü '–†–µ—Ü–µ–ø—Ç' –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–∞ recipes.csv.")
