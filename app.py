import streamlit as st
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ CSV —Å —è–≤–Ω—ã–º –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫
recipes_df = pd.read_csv('updated_recipes_with_cherry.csv')

# –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
recipes_df['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'] = recipes_df['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].apply(lambda x: x.replace(') ', ')\n'))


# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
st.title("–ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ üç≥")

# –ü–æ–∏—Å–∫ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É
st.header("üîç –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É")
ingredient = st.text_input("–í–≤–µ–¥–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞:")

if ingredient:
    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—É
    filtered_recipes = recipes_df[recipes_df['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].str.contains(ingredient, case=False, na=False)]
    if not filtered_recipes.empty:
        st.subheader("üçΩÔ∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã:")
        for _, row in filtered_recipes.iterrows():
            st.markdown(f"## {row['–ù–∞–∑–≤–∞–Ω–∏–µ']}")
            st.write(f"**–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:**\n{row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã']}")
            st.write(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{row['–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è']}")
    else:
        st.write("üòî –†–µ—Ü–µ–ø—Ç—ã —Å —ç—Ç–∏–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–º –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
st.header("üìã –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã")
for _, row in recipes_df.iterrows():
    st.markdown(f"### {row['–ù–∞–∑–≤–∞–Ω–∏–µ']}")
    # –†–∞–∑–¥–µ–ª—è–µ–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –ø–æ –∑–∞–ø—è—Ç—ã–º –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–µ
    ingredients = row['–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã'].replace(') ', ')\n').replace(', ', '\n- ')
    st.markdown(f"**–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:**\n- {ingredients}")
    st.write(f"**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**\n{row['–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è']}")



